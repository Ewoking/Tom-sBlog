(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{10:function(e,t){e.exports={apiUrl:"https://toms-blog.herokuapp.com/api/v1"}},16:function(e,t){e.exports={isValidEmail:function(e){var t=e.split("@");return 2===t.length&&(!(t[0].length>64||t[1].length>254)&&/\S+@\S+\.\S+/.test(e))},isValidName:function(e){if(e.length>20)return!1;return/^[a-zA-Z\xc0-\xff\-\']{2,}$/.test(e)},isValidPassword:function(e){if(e.length>50)return!1;if(e.length<8)return!1;return/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,50}$/.test(e)}}},52:function(e,t,n){},53:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(24),a=n.n(r),i=(n(52),n(5)),o=(n(53),n(3)),u=n(2),l=n(6),j=n(7),d=n(25),b=n(0),m=function(){return Object(b.jsxs)("aside",{children:[Object(b.jsxs)("section",{className:"networks-wrapper",children:[Object(b.jsx)("h4",{children:"Suivez-moi"}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://twitter.com/keanuchreevess",children:Object(b.jsx)(j.a,{icon:d.c,className:"twitter-logo"})})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://www.instagram.com/keaanuureeves/",children:Object(b.jsx)(j.a,{icon:d.b,className:"instagram-logo"})})}),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"https://www.facebook.com/keanu.revees.71216",children:Object(b.jsx)(j.a,{icon:d.a,className:"facebook-logo"})})})]})]}),Object(b.jsxs)("section",{className:"author-wrapper",children:[Object(b.jsx)("h4",{children:"L'Auteur"}),Object(b.jsx)("figure",{children:Object(b.jsxs)(i.b,{to:"/about",children:[Object(b.jsx)("img",{src:"/images/thomasAnderson.jpg",alt:"Portrait de Thomas Anderson"}),Object(b.jsx)("figcaption",{children:"Tom Anderson"})]})})]})]})},p=function(e){var t,n;return Object(b.jsxs)("article",{className:"post-overview",children:[Object(b.jsx)("h2",{children:e.post.title}),Object(b.jsx)("p",{children:(n=e.post.creationTimestamp,"le "+new Date(n).toLocaleDateString())}),Object(b.jsx)("p",{children:(t=e.post.content,(t=JSON.parse(t)).split(/\s|\n/).slice(0,30).join(" ")+" ...")})]})},h=n(9);function O(){var e=document.querySelector(".page"),t=document.querySelector(".header-wrapper"),n=document.querySelector("footer"),c=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),s=parseFloat(getComputedStyle(e).height),r=parseFloat(getComputedStyle(t).height),a=parseFloat(getComputedStyle(n).height),i=parseFloat(getComputedStyle(e).marginTop);s<c-r&&(e.style.minHeight=c-r-a-2*i+"px")}var f=n(10),x=n(11),g=Object(l.b)((function(e){return{user:e.user}}),{})((function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),l=Object(u.a)(a,2),d=l[0],g=l[1],v=Object(c.useState)(!1),w=Object(u.a)(v,2),N=w[0],S=w[1],y=Object(o.g)();Object(c.useEffect)((function(){window.scrollTo(0,0),O(),x.get(f.apiUrl+"/home").then((function(e){r(e.data.posts)})).catch((function(e){y.push("/noService")}))}),[y]);return Object(b.jsxs)("div",{className:"page home",children:[N&&Object(b.jsx)(o.a,{to:{pathname:"/search",state:{query:d}}}),Object(b.jsx)("div",{className:"search-bar-wrapper",children:Object(b.jsxs)("form",{className:"search-bar",onSubmit:function(e){!function(e){e.preventDefault(),S(!0)}(e)},children:[Object(b.jsx)("input",{type:"text",placeholder:"Recherchez un article",value:d,onChange:function(e){g(e.currentTarget.value)},required:!0}),Object(b.jsx)("button",{type:"submit",children:Object(b.jsx)(j.a,{icon:h.c,className:"search-icon"})})]})}),Object(b.jsx)("h1",{children:"Bienvenue sur le Blog de Tom"}),Object(b.jsx)("h3",{children:"Les Derniers Articles"}),Object(b.jsxs)("div",{className:"main-wrapper",children:[Object(b.jsx)("div",{className:"content-wrapper",children:0!==s.length&&Object(b.jsx)("section",{children:s.map((function(e,t){return Object(b.jsx)(i.b,{to:"/post/".concat(e.id),children:Object(b.jsx)(p,{post:e})},t)}))})}),Object(b.jsx)(m,{})]})]})})),v=n.p+"static/media/thomasAnderson.15344b2d.jpg",w=function(){return Object(c.useEffect)((function(){window.scrollTo(0,0),O()}),[]),Object(b.jsx)("div",{className:"page about",children:Object(b.jsxs)("div",{className:"about-wrapper",children:[Object(b.jsxs)("section",{className:"description-wrapper",children:[Object(b.jsx)("h2",{children:"Thomas Anderson"}),Object(b.jsx)("p",{children:"Velit dignissim sodales ut eu sem integer vitae justo eget. Sed arcu non odio euismod lacinia at quis. Erat velit scelerisque in dictum non consectetur a erat. Sed libero enim sed faucibus turpis. Ultrices in iaculis nunc sed augue lacus. Urna nunc id cursus metus aliquam eleifend mi in. Sed felis eget velit aliquet sagittis id consectetur purus. Urna nec tincidunt praesent semper feugiat. Adipiscing tristique risus nec feugiat in. Ornare aenean euismod elementum nisi quis eleifend. Nec nam aliquam sem et tortor consequat id porta nibh. Sem viverra aliquet eget sit amet tellus. Dui ut ornare lectus sit amet est."}),Object(b.jsx)("br",{}),Object(b.jsx)("p",{children:"Velit dignissim sodales ut eu sem integer vitae justo eget. Sed arcu non odio euismod lacinia at quis. Erat velit scelerisque in dictum non consectetur a erat. Sed libero enim sed faucibus turpis. Ultrices in iaculis nunc sed augue lacus. Urna nunc id cursus metus aliquam eleifend mi in. Sed felis eget velit aliquet sagittis id consectetur purus. Urna nec tincidunt praesent semper feugiat. Adipiscing tristique risus nec feugiat in. Ornare aenean euismod elementum nisi quis eleifend. Nec nam aliquam sem et tortor consequat id porta nibh. Sem viverra aliquet eget sit amet tellus. Dui ut ornare lectus sit amet est."})]}),Object(b.jsx)("img",{src:v,alt:"Portrait de Tom Anderson"})]})})},N=n(10),S=n(11),y=Object(l.b)((function(e){return{user:e.user}}),{})((function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)([]),l=Object(u.a)(a,2),d=l[0],p=l[1],O=Object(c.useState)(""),f=Object(u.a)(O,2),x=f[0],g=f[1],v=Object(o.g)(),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e),c="le "+n.toLocaleDateString();return t?c+" \xe0 ".concat(n.getHours(),"h").concat(n.getMinutes()):c};Object(c.useEffect)((function(){var t=e.match.params.id;S.get(N.apiUrl+"/post/"+t).then((function(e){r(e.data.post),p(e.data.comments)})).catch((function(e){e.response&&404===e.response.status?v.push("/"):v.push("/noService")}))}),[e.match.params.id,v]);return Object(b.jsx)("div",{className:"page post-detail",children:Object(b.jsxs)("div",{className:"main-wrapper",children:[Object(b.jsxs)("div",{className:"content-wrapper",children:[s&&Object(b.jsxs)("section",{className:"post-wrapper",children:[Object(b.jsx)("h1",{children:s.title}),Object(b.jsx)("p",{children:w(s.creationTimestamp)}),Object(b.jsx)("div",{className:"post-content",children:JSON.parse(s.content).split(/\n/).map((function(e,t){return""!==e?Object(b.jsx)("p",{children:e},t):Object(b.jsx)("br",{},t)}))}),"admin"===e.user.infos.role&&Object(b.jsxs)("div",{className:"admin-options",children:[Object(b.jsx)("button",{className:"admin-button edit-button",onClick:function(e){var t;t=s.id,v.push("/editPost/"+t)},children:Object(b.jsx)(j.a,{icon:h.b,className:"admin-icon"})}),Object(b.jsx)("button",{className:"admin-button delete-button",onClick:function(t){!function(t,n){t.preventDefault(),window.confirm("Voulez-vous vraiment supprimer cet article ?")&&S.delete(N.apiUrl+"/deletePost/"+n,{headers:{"x-access-token":e.user.infos.token}}).then((function(e){v.push("/")})).catch((function(e){v.push("/noService")}))}(t,s.id)},children:Object(b.jsx)(j.a,{icon:h.d,className:"admin-icon"})})]})]}),Object(b.jsxs)("section",{className:"comment-section",children:[Object(b.jsx)("h2",{children:"Commentaires"}),0!==d.length?d.map((function(t){return Object(b.jsxs)("article",{className:"comment-wrapper",children:[Object(b.jsx)("h3",{children:t.firstName+" "+t.lastName}),t.userId===e.user.infos.id&&Object(b.jsx)(j.a,{icon:h.e,className:"user-icon"}),Object(b.jsx)("p",{children:w(t.creationTimestamp,!0)}),Object(b.jsx)("div",{className:"comment-content",children:JSON.parse(t.content).split(/\n/).map((function(e,t){return""!==e?Object(b.jsx)("p",{children:e},t):Object(b.jsx)("br",{},t)}))}),(t.userId===e.user.infos.id||"admin"===e.user.infos.role)&&Object(b.jsx)("button",{className:"delete-button user-button",onClick:function(n){!function(t,n){t.preventDefault(),window.confirm("Voulez-vous vraiment supprimer ce message ?")&&S.delete(N.apiUrl+"/deleteComment/"+n,{headers:{"x-access-token":e.user.infos.token}}).then((function(e){window.location.reload(!1)})).catch((function(e){v.push("/noService")}))}(n,t.id)},children:Object(b.jsx)(j.a,{icon:h.d,className:"admin-icon"})})]},t.id)})):Object(b.jsx)("article",{className:"no-result-wrapper",children:Object(b.jsx)("p",{children:"Aucun commentaire, soyez le premier \xe0 commenter !"})}),e.user.isLogged?Object(b.jsxs)("form",{className:"add-comment-wrapper",onSubmit:function(t){!function(t){t.preventDefault();var n={userId:e.user.infos.id,postId:e.match.params.id,content:JSON.stringify(x)};S.post(N.apiUrl+"/newComment",n,{headers:{"x-access-token":e.user.infos.token}}).then((function(e){window.location.reload(!1)})).catch((function(e){v.push("/noService")}))}(t)},children:[Object(b.jsx)("textarea",{placeholder:"Ajoutez votre commentaire",value:x,onChange:function(e){return g(e.currentTarget.value)},required:!0}),Object(b.jsx)("input",{type:"submit",value:"Poster Commentaire",className:"add-comment-btn"})]}):Object(b.jsx)(i.b,{to:"/login",children:Object(b.jsx)("button",{className:"add-comment-btn",children:"Connectez vous pour pouvoir commenter"})})]})]}),Object(b.jsx)(m,{})]})})})),q=n(11),C=n.n(q),T=n(10),k=n.n(T),L="CONNECT_USER",E="LOGOUT_USER",U=function(e){return function(t){t({type:L,payload:e})}},A=function(){return function(e){e({type:E,payload:null})}},P=n(16),D={connectUser:U},F=Object(l.b)((function(e){return{user:e.user}}),D)((function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),l=Object(u.a)(a,2),j=l[0],d=l[1],m=Object(c.useState)(!1),p=Object(u.a)(m,2),h=p[0],f=p[1],x=Object(c.useState)(null),g=Object(u.a)(x,2),v=g[0],w=g[1],N=function(e){if(e.preventDefault(),P.isValidEmail(s)?P.isValidPassword(j)?(w(null),1):(w({source:"password",message:"Mot de passe invalide : minimum une Majuscule, une minuscule, un chiffre et un caract\xe8re sp\xe9cial (#?!@$ %^&*-). longueur comprise entre 8 et 50"}),0):(w({source:"email",message:"Email invalide"}),0)){var t={email:s,password:j};C.a.post(k.a.apiUrl+"/login",t).then((function(e){window.localStorage.setItem("TomBlog",e.data.token),f(!0)})).catch((function(e){e.response&&401===e.response.status?w({source:"request",message:"Utilisateur/Mot de passe invalide"}):w({source:"request",message:"Un probl\xe8me a eu lieu, Veuillez r\xe9essayer ult\xe9rieurement."})}))}};return Object(c.useEffect)((function(){O(),e.user.isLogged&&f(!0);var t=document.querySelector(".error-area");if(document.querySelectorAll(".login-field").forEach((function(e){e.classList.remove("bad-input")})),v){if(t.classList.remove("invisible"),"request"!==v.source){var n=document.querySelector("#".concat(v.source));n.classList.add("bad-input"),n.focus()}}else t.classList.add("invisible")}),[v,e.user.isLogged]),Object(b.jsxs)("div",{className:"page login",children:[h&&Object(b.jsx)(o.a,{to:"/"}),Object(b.jsx)("h1",{children:"Se Connecter"}),Object(b.jsxs)("form",{className:"connection-wrapper sign-in",onSubmit:function(e){return N(e)},children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{className:"login-field",type:"email",name:"email",id:"email",placeholder:"email@gmail.com",value:s,onChange:function(e){return r(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"password",children:"Mot de Passe"}),Object(b.jsx)("input",{className:"login-field",type:"password",name:"password",id:"password",placeholder:"votre mot de passe",value:j,onChange:function(e){return d(e.currentTarget.value)},required:!0}),Object(b.jsx)("div",{className:"error-area",children:Object(b.jsx)("p",{className:"error-message",children:v&&v.message})}),Object(b.jsx)("input",{type:"submit",value:"Se Connecter"}),Object(b.jsx)(i.b,{to:"/register",children:Object(b.jsx)("button",{children:"S'Enregistrer"})})]})]})})),M={connectUser:U},V=Object(l.b)((function(e){return{user:e.user}}),M)((function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),l=Object(u.a)(a,2),j=l[0],d=l[1],m=Object(c.useState)(""),p=Object(u.a)(m,2),h=p[0],f=p[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),v=g[0],w=g[1],N=Object(c.useState)(!1),S=Object(u.a)(N,2),y=S[0],q=S[1],T=Object(c.useState)(null),L=Object(u.a)(T,2),E=L[0],U=L[1];Object(c.useEffect)((function(){O(),e.user.isLogged&&q(!0);var t=document.querySelector(".error-area");if(document.querySelectorAll(".register-field").forEach((function(e){e.classList.remove("bad-input")})),E){if(t.classList.remove("invisible"),"request"!==E.source){var n=document.querySelector("#".concat(E.source));n.classList.add("bad-input"),n.focus()}}else t.classList.add("invisible")}),[E,e.user.isLogged]);var A=function(e){if(e.preventDefault(),P.isValidEmail(s)?P.isValidName(h)?P.isValidName(v)?P.isValidPassword(j)?(U(null),1):(U({source:"password",message:"Mot de passe invalide : minimum une Majuscule, une minuscule, un chiffre et un caract\xe8re sp\xe9cial (#?!@$ %^&*-). longueur comprise entre 8 et 50"}),0):(U({source:"lastName",message:"Le nom n'accepte pas les chiffres ou caract\xe8res sp\xe9ciaux. longueur comprise entre 2 et 20"}),0):(U({source:"firstName",message:"Le pr\xe9nom n'accepte pas les chiffres ou caract\xe8res sp\xe9ciaux. longueur comprise entre 2 et 20"}),0):(U({source:"email",message:"Email invalide"}),0)){var t={email:s,password:j,firstName:h,lastName:v};C.a.post(k.a.apiUrl+"/register",t).then((function(e){q(!0)})).catch((function(e){e.response&&401===e.response.status?U({source:"request",message:"Email d\xe9j\xe0 utilis\xe9"}):U({source:"request",message:"Un probl\xe8me a eu lieu, Veuillez r\xe9essayer ult\xe9rieurement."})}))}};return Object(b.jsxs)("div",{className:"page register",children:[y&&Object(b.jsx)(o.a,{to:"/login"}),Object(b.jsx)("h1",{children:"S'Enregister"}),Object(b.jsxs)("form",{className:"connection-wrapper sign-up",onSubmit:function(e){return A(e)},children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{className:"register-field",type:"text",name:"email",id:"email",placeholder:"email@gmail.com",value:s,onChange:function(e){return r(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"firstName",children:"Pr\xe9nom"}),Object(b.jsx)("input",{className:"register-field",type:"text",name:"firstName",id:"firstName",placeholder:"Jean",value:h,onChange:function(e){return f(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"lastName",children:"Nom"}),Object(b.jsx)("input",{className:"register-field",type:"text",name:"lastName",id:"lastName",placeholder:"Valjean",value:v,onChange:function(e){return w(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"password",children:"Mot de Passe"}),Object(b.jsx)("input",{className:"register-field",type:"password",name:"password",id:"password",placeholder:"votre mot de passe",value:j,onChange:function(e){return d(e.currentTarget.value)},required:!0}),Object(b.jsx)("div",{className:"error-area",children:Object(b.jsx)("p",{className:"error-message",children:E&&E.message})}),Object(b.jsx)("input",{type:"submit",value:"S'Enregistrer"}),Object(b.jsx)(i.b,{to:"/login",children:Object(b.jsx)("button",{children:"Se Connecter"})})]})]})})),z={logoutUser:A},J=Object(l.b)((function(e){return{user:e.user}}),z)((function(e){return Object(c.useEffect)((function(){window.localStorage.removeItem("TomBlog"),e.logoutUser()}),[e]),Object(b.jsx)("div",{className:"logout",children:!e.user.isLogged&&Object(b.jsx)(o.a,{to:"/"})})})),R=n(10),I=n(11),B=Object(l.b)((function(e){return{}}),{})((function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),l=Object(u.a)(a,2),d=l[0],f=l[1],x=Object(c.useState)(""),g=Object(u.a)(x,2),v=g[0],w=g[1],N=Object(o.g)();Object(c.useEffect)((function(){if(window.scrollTo(0,0),O(),e.location.state){var t="query"in e.location.state&&e.location.state.query;t&&(f(t),w(t),I.get(R.apiUrl+"/search?q="+t).then((function(e){r(e.data.posts)})).catch((function(e){N.push("/noService")})))}}),[e.location.state,N]);return Object(b.jsxs)("div",{className:"page search",children:[Object(b.jsx)("h1",{children:"Recherche"}),Object(b.jsx)("div",{className:"search-bar-wrapper",children:Object(b.jsxs)("form",{className:"search-bar",onSubmit:function(e){!function(e){e.preventDefault(),w(d),I.get(R.apiUrl+"/search?q="+d).then((function(e){r(e.data.posts)}))}(e)},children:[Object(b.jsx)("input",{type:"text",placeholder:"Recherchez un article",value:d,onChange:function(e){f(e.currentTarget.value)},required:!0}),Object(b.jsx)("button",{type:"submit",children:Object(b.jsx)(j.a,{icon:h.c,className:"search-icon"})})]})}),Object(b.jsxs)("h3",{children:['R\xe9sultats pour : "',v,'"']}),Object(b.jsxs)("div",{className:"main-wrapper",children:[Object(b.jsx)("div",{className:"content-wrapper",children:0!==s.length?Object(b.jsx)("section",{children:s.map((function(e,t){return Object(b.jsx)(i.b,{to:"/post/".concat(e.id),children:Object(b.jsx)(p,{post:e})},t)}))}):Object(b.jsx)("section",{className:"no-result-wrapper",children:Object(b.jsx)("p",{children:"Pas de r\xe9sultats ..."})})}),Object(b.jsx)(m,{})]})]})})),H=n(10),W=n(11),$=Object(l.b)((function(e){return{}}),{})((function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(0),l=Object(u.a)(a,2),d=l[0],f=l[1],x=Object(c.useState)(2e3),g=Object(u.a)(x,2),v=g[0],w=g[1],N=Object(c.useState)(0),S=Object(u.a)(N,2),y=S[0],q=S[1],C=Object(o.g)();Object(c.useEffect)((function(){window.scrollTo(0,0),O();var e=new Date;f(e.getMonth()),w(e.getFullYear()),q(e.getFullYear()),W.get(H.apiUrl+"/monthly?date="+e.getFullYear()+"-"+e.getMonth()).then((function(e){r(e.data.posts)})).catch((function(e){e.response&&400===e.response.status?C.push("/home"):C.push("/noService")}))}),[C]);return Object(b.jsxs)("div",{className:"page archives",children:[Object(b.jsx)("h1",{children:"Recherche par mois"}),Object(b.jsx)("div",{className:"date-bar-wrapper",children:Object(b.jsxs)("form",{className:"date-bar",onSubmit:function(e){!function(e){e.preventDefault(),W.get(H.apiUrl+"/monthly?date="+v+"-"+d).then((function(e){r(e.data.posts)})).catch((function(e){e.response&&400===e.response.status?C.push("/home"):C.push("/noService")}))}(e)},children:[Object(b.jsxs)("select",{className:"month-select",value:d,onChange:function(e){return f(e.currentTarget.value)},children:[Object(b.jsx)("option",{value:"00",children:"Janvier"}),Object(b.jsx)("option",{value:"01",children:"F\xe9vrier"}),Object(b.jsx)("option",{value:"02",children:"Mars"}),Object(b.jsx)("option",{value:"03",children:"Avril"}),Object(b.jsx)("option",{value:"04",children:"Mai"}),Object(b.jsx)("option",{value:"05",children:"Juin"}),Object(b.jsx)("option",{value:"06",children:"Juillet"}),Object(b.jsx)("option",{value:"07",children:"Aout"}),Object(b.jsx)("option",{value:"08",children:"Septembre"}),Object(b.jsx)("option",{value:"09",children:"Octobre"}),Object(b.jsx)("option",{value:"10",children:"Novembre"}),Object(b.jsx)("option",{value:"11",children:"D\xe9cembre"})]}),Object(b.jsx)("input",{className:"year-input",type:"number",min:"1999",max:y,step:"1",value:v,onChange:function(e){return w(e.currentTarget.value)}}),Object(b.jsx)("button",{type:"submit",children:Object(b.jsx)(j.a,{icon:h.c,className:"search-icon"})})]})}),Object(b.jsx)("h3",{children:"R\xe9sultats du mois"}),Object(b.jsxs)("div",{className:"main-wrapper",children:[Object(b.jsx)("div",{className:"content-wrapper",children:0!==s.length?Object(b.jsx)("section",{children:s.map((function(e,t){return Object(b.jsx)(i.b,{to:"/post/".concat(e.id),children:Object(b.jsx)(p,{post:e})},t)}))}):Object(b.jsx)("section",{className:"no-result-wrapper",children:Object(b.jsx)("p",{children:"Pas de r\xe9sultats ..."})})}),Object(b.jsx)(m,{})]})]})})),Y=Object(l.b)((function(e){return{user:e.user}}),{})((function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),l=i[0],j=i[1],d=Object(c.useState)(!1),m=Object(u.a)(d,2),p=m[0],h=m[1],O=Object(o.g)();return Object(b.jsxs)("div",{className:"page new-post",children:[p&&Object(b.jsx)(o.a,{to:"/"}),Object(b.jsx)("h1",{children:"Nouvel Article"}),Object(b.jsxs)("form",{className:"post-form",onSubmit:function(t){return function(t){t.preventDefault();var n={title:s,content:JSON.stringify(l)};C.a.post(k.a.apiUrl+"/newPost",n,{headers:{"x-access-token":e.user.infos.token}}).then((function(e){h(!0)})).catch((function(e){O.push("/noService")}))}(t)},children:[Object(b.jsx)("label",{htmlFor:"title",children:"Titre"}),Object(b.jsx)("input",{type:"text",name:"title",id:"title",value:s,onChange:function(e){return r(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"contenu",children:"Contenu de l'Article"}),Object(b.jsx)("textarea",{name:"content",id:"content",value:l,onChange:function(e){return j(e.currentTarget.value)},rows:"30",required:!0}),Object(b.jsx)("input",{type:"submit",value:"Poster l'article"})]})]})})),Z={logoutUser:A},_=Object(l.b)((function(e){return{user:e.user}}),Z)((function(e){var t=Object(c.useState)(!1),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(o.g)();Object(c.useEffect)((function(){if(s){var e=document.querySelector(".header-wrapper");e.classList.add("no-scrolling"),document.body.style.paddingTop=window.getComputedStyle(e).height;var t=document.querySelector(".burger-menu");t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+parseFloat(window.getComputedStyle(e).height)+"px";var n=document.querySelector(".burger-wrapper");return t.style.right="-"+window.getComputedStyle(n).marginRight,window.addEventListener("click",(function(e){return l(e)})),function(){window.removeEventListener("click",(function(e){return l(e)}))}}document.querySelector(".header-wrapper").classList.remove("no-scrolling"),document.body.style.paddingTop=0}),[s]);var l=function(e){e.stopPropagation(),e.target.classList.contains("burger-wrapper")||e.target.classList.contains("burger-line")||r(!1)};return Object(b.jsxs)("div",{className:"burger-wrapper",onClick:function(){return r(!s)},children:[Object(b.jsx)("hr",{className:"burger-line"}),Object(b.jsx)("hr",{className:"burger-line"}),Object(b.jsx)("hr",{className:"burger-line"}),s&&Object(b.jsx)("div",{className:"burger-menu",children:Object(b.jsxs)("nav",{onClick:function(e){return e.stopPropagation()},children:[e.user.isLogged&&Object(b.jsx)("h2",{children:e.user.infos.firstName+" "+e.user.infos.lastName}),e.user.isLogged&&"admin"===e.user.infos.role&&Object(b.jsx)("div",{className:"new-article-btn-wrapper",children:Object(b.jsxs)("button",{className:"new-article-btn",onClick:function(){a.push("/newPost"),r(!1)},children:[Object(b.jsx)("p",{children:"Cr\xe9er un nouvel Article"}),Object(b.jsx)(j.a,{icon:h.b,className:"btn-feather-logo"})]})}),Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/",onClick:function(){return r(!1)},children:"Accueil"})}),Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/about",onClick:function(){return r(!1)},children:"L'auteur"})}),Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/archives",onClick:function(){return r(!1)},children:"Archives"})})]}),e.user.isLogged?Object(b.jsx)(i.b,{to:"/logout",onClick:function(){return r(!1)},children:"D\xe9connexion"}):Object(b.jsx)(i.b,{to:"/login",onClick:function(){return r(!1)},children:"Connexion"})]})})]})})),G=function(){return Object(b.jsxs)("header",{className:"header-wrapper",children:[Object(b.jsx)(i.b,{to:"/",children:Object(b.jsxs)("div",{className:"title-wrapper",children:[Object(b.jsx)(j.a,{icon:h.b,className:"feather-logo"}),Object(b.jsx)("h1",{children:"Tom's Blog"})]})}),Object(b.jsx)(_,{})]})},K=function(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){return window.addEventListener("scroll",r),document.querySelector(".scroll-up-wrapper").style.display=n<200?"none":"flex",function(){window.removeEventListener("scroll",r)}}),[n]);var r=function(){s(window.scrollY)};return Object(b.jsx)("div",{className:"scroll-up-wrapper",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:Object(b.jsx)(j.a,{icon:h.a,className:"arrow-up"})})},Q=n(46),X=n(41),ee=n(42),te=n(47),ne=n(45);function ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(n){Object(te.a)(s,n);var c=Object(ne.a)(s);function s(e){var t;return Object(X.a)(this,s),(t=c.call(this,e)).state={redirect:!1},t}return Object(ee.a)(s,[{key:"componentDidMount",value:function(){var e=this;if(this.props.user.isLogged){if("admin"===this.props.user.infos.role)return;return t?this.setState({redirect:!0}):void 0}var n=window.localStorage.getItem("TomBlog");if(!n)return t?this.setState({redirect:!0}):void 0;C.a.get(k.a.apiUrl+"/checkToken",{headers:{"x-access-token":n}}).then((function(c){return 200!==c.status||t&&"admin"!==c.data.user.role?e.setState({redirect:!0}):(c.data.user.token=n,void e.props.connectUser(c.data.user))})).catch((function(t){e.setState({redirect:!0})}))}},{key:"render",value:function(){return this.state.redirect?Object(b.jsx)(o.a,{to:"/login"}):Object(b.jsx)(e,Object(Q.a)({},this.props))}}]),s}(s.a.Component),c=function(e){return{user:e.user}},r={connectUser:U};return Object(l.b)(c,r)(n)}var se=Object(l.b)((function(e){return{user:e.user}}),{})((function(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),l=i[0],j=i[1],d=Object(c.useState)(!1),m=Object(u.a)(d,2),p=m[0],h=m[1],O=Object(o.g)();Object(c.useEffect)((function(){var t=e.match.params.id;C.a.get(k.a.apiUrl+"/post/"+t).then((function(e){r(e.data.post.title),j(JSON.parse(e.data.post.content))})).catch((function(e){e.response&&404===e.response.status?O.push("/"):O.push("/noService")}))}),[e.match.params.id,O]);return Object(b.jsxs)("div",{className:"page new-post",children:[p&&Object(b.jsx)(o.a,{to:"/"}),Object(b.jsx)("h1",{children:"Editer cet Article"}),Object(b.jsxs)("form",{className:"post-form",onSubmit:function(t){return function(t){t.preventDefault();var n={title:s,content:JSON.stringify(l)};C.a.put(k.a.apiUrl+"/editPost/"+e.match.params.id,n,{headers:{"x-access-token":e.user.infos.token}}).then((function(e){h(!0)})).catch((function(e){O.push("/noService")}))}(t)},children:[Object(b.jsx)("label",{htmlFor:"title",children:"Titre"}),Object(b.jsx)("input",{type:"text",name:"title",id:"title",value:s,onChange:function(e){return r(e.currentTarget.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"contenu",children:"Contenu de l'Article"}),Object(b.jsx)("textarea",{name:"content",id:"content",value:l,onChange:function(e){return j(e.currentTarget.value)},rows:"30",required:!0}),Object(b.jsx)("input",{type:"submit",value:"Editer l'article"})]})]})})),re=function(){return Object(c.useEffect)((function(){O()}),[]),Object(b.jsxs)("div",{className:"page no-service",children:[Object(b.jsx)("h1",{children:"Connexion perdue"}),Object(b.jsx)("p",{children:"Le blog est temporairement inaccessible, veuillez r\xe9essayer ult\xe9rieurement."})]})},ae=function(){return Object(b.jsx)("footer",{children:Object(b.jsxs)("div",{className:"footer-wrapper",children:[Object(b.jsx)("p",{children:"Site r\xe9alis\xe9 par Thomas Tenot"}),Object(b.jsxs)("figure",{children:[Object(b.jsx)("a",{href:"https://3wa.fr/",children:Object(b.jsx)("img",{src:"/images/3WA-logo.gif",alt:"logo de la 3WA"})}),Object(b.jsxs)("figcaption",{children:["Projet de fin de formation",Object(b.jsx)("br",{}),"3WA"]})]})]})})};var ie=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(G,{}),Object(b.jsxs)("main",{children:[Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",component:ce(g)}),Object(b.jsx)(o.b,{exact:!0,path:"/about",component:ce(w)}),Object(b.jsx)(o.b,{exact:!0,path:"/post/:id",component:ce(y)}),Object(b.jsx)(o.b,{exact:!0,path:"/search",component:ce(B)}),Object(b.jsx)(o.b,{exact:!0,path:"/archives",component:ce($)}),Object(b.jsx)(o.b,{exact:!0,path:"/login",component:ce(F)}),Object(b.jsx)(o.b,{exact:!0,path:"/logout",component:ce(J)}),Object(b.jsx)(o.b,{exact:!0,path:"/register",component:ce(V)}),Object(b.jsx)(o.b,{exact:!0,path:"/newPost",component:ce(Y,!0)}),Object(b.jsx)(o.b,{exact:!0,path:"/editPost/:id",component:ce(se,!0)}),Object(b.jsx)(o.b,{exact:!0,path:"/noService",component:re}),Object(b.jsx)(o.a,{to:"/"})]}),Object(b.jsx)(K,{})]}),Object(b.jsx)(ae,{})]})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))},ue=n(18),le=n(43),je=n(44),de={infos:{},isLogged:!1};var be=Object(ue.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{infos:t.payload,isLogged:!0};case E:return de;default:return e}}}),me=Object(le.composeWithDevTools)(Object(ue.applyMiddleware)(je.a)),pe=Object(ue.createStore)(be,{},me);a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(l.a,{store:pe,children:Object(b.jsx)(i.a,{children:Object(b.jsx)(ie,{})})})}),document.getElementById("root")),oe()}},[[79,1,2]]]);
//# sourceMappingURL=main.9453d367.chunk.js.map